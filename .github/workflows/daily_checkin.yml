name: Daily Auto Check-in

on:
  schedule:
    # æ¯å¤© UTC 2:00 è¿è¡Œ (å³åŒ—äº¬æ—¶é—´ 10:00)
    - cron: '00 2 * * *'
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®è§¦å‘æµ‹è¯•

jobs:
  checkin:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: latest

      # ğŸ‘‡ å®‰è£…ä¾èµ– (è™½ç„¶ä½ å¯èƒ½æ²¡æœ‰å…¶ä»–ä¾èµ–ï¼Œä½†è¿™æ˜¯å¥½ä¹ æƒ¯)
      - name: Install Dependencies
        run: bun install

      - name: Run Check-in Script
        env:
          # ä» GitHub Secrets è¯»å–æ•æ„Ÿæ•°æ®
          USER_EMAIL: ${{ secrets.USER_EMAIL }}
          USER_PASSWORD: ${{ secrets.USER_PASSWORD }}
          PUSHPLUS_TOKEN: ${{ secrets.PUSHPLUS_TOKEN }}
          # è®¾ç½®æ—¶åŒºï¼Œæ–¹ä¾¿æ—¥å¿—æŸ¥çœ‹
          TZ: Asia/Shanghai
        run: bun run checkin.ts